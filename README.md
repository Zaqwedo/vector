# Vector OS

Персональный трекер в инженерно-минималистичном стиле: `Вектор` → `День` → `Неделя` → `Месяц`.

## Стек

- Next.js 15 (App Router)
- TypeScript
- React 19
- PostgreSQL (`pg`)
- Server Actions (без Express)

## Локальный запуск

1. Создайте `.env.local` в корне:

```env
DATABASE_URL=postgresql://admin:admin@localhost:5432/vectoros
```

2. Установите зависимости:

```bash
npm install
```

3. Запустите dev-сервер:

```bash
npm run dev
```

4. Откройте: [http://localhost:3000](http://localhost:3000)

## Экраны

### `/today` — День
- Заголовок `День · {дата}` с выбором даты.
- Автоподгрузка записи выбранной даты.
- `Обновлено · {время}` при наличии записи.
- Для прошлой даты: `Просмотр прошлой даты` + возврат к сегодняшнему.
- Блоки: `Фокус`, `Проект`, `Тело`.
- Тренировки: multi-select, `Нет` эксклюзивный.
- Кнопка: `Зафиксировать день`.

### `/week` — Неделя
- Выбор недели через дату.
- Агрегаты на сервере: deep, strategic moves, trainings, avg steps, noise %, speed.
- Статус недели: зелёный/жёлтый/красный + флаги отклонений.
- Оценка траектории `1..5`.
- Заметка недели.

### `/month` — Месяц
- Заголовок `Месяц · Mon YYYY` + статус дохода (`впереди / по плану / отставание`).
- Два визуальных блока:
  - `Общий итог`
  - `По неделям`
- В `Общий итог`: target/actual/delta, агрегаты фокуса и тела, оценка `1..5`, поле корректировки.
- У поля факта дохода есть чек `Ввёл`.
- Кнопки: `Сохранить месяц`, `Зафиксировать месяц`.
- После фиксации: `Зафиксировано · {время}`, месяц read-only.

### `/vector` — Вектор
- Долгосрочные константы: старт, горизонт, доход, вес, цель проекта, лимит часов.

## База данных

Схема: `db/schema.sql`.

Основные таблицы:
- `vector`
- `projects` (ограничение: только один активный проект)
- `days`
- `day_training`
- `weeks`
- `month_reviews`
- `month_week_income` (поддержка недельного дохода на уровне модели)

Инициализация схемы происходит автоматически в `lib/db.ts` при первом обращении.

## Структура

```text
app/
  actions.ts
  globals.css
  layout.tsx
  page.tsx
  today/page.tsx
  week/page.tsx
  month/page.tsx
  vector/page.tsx
components/
  AutoDateInput.tsx
  Shell.tsx
lib/
  date.ts
  db.ts
  domain.ts
  types.ts
db/
  schema.sql
```

## Деплой

Проект готов к Vercel:
1. Подключить репозиторий.
2. Добавить `DATABASE_URL` в Environment Variables.
3. Запустить деплой.
