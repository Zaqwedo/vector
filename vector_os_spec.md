# Vector OS — Текущая продуктовая спецификация

_Обновлено: 2026-02-16_

## 1. Позиционирование

Vector OS — личный инструмент системной навигации.
Это не SaaS-витрина, не мотивационный трекер и не геймифицированный дневник.

Принцип: фиксировать факты, видеть отклонения, корректировать курс.

## 2. Продуктовая модель

Сущности:
- **Вектор** — долгосрочные ограничения и цель.
- **День** — атомарные ежедневные факты.
- **Неделя** — агрегаты и качество траектории.
- **Месяц** — обзор, корректировка и фиксация периода.

Ключевые сигналы:
- speed,
- noise ratio,
- strategic moves,
- trajectory quality,
- income status относительно цели.

## 3. Навигация

Верхнее меню:
- `Вектор`
- `День`
- `Неделя`
- `Месяц`

Активный раздел подчёркивается тонким акцентом.

## 4. Экранные требования

### `/today`
- Заголовок: `День · {дата}`.
- Дата редактируема через календарь.
- Если дата в прошлом, показывается `Просмотр прошлой даты` + возврат к сегодня.
- При наличии записи всегда показывается `Обновлено · {время}`.
- Секции:
  - `Фокус`: deep minutes, unfocused minutes.
  - `Проект`: active project (read-only), key move.
  - `Тело`: тренировки (multi-select), шаги.
- `Нет` в тренировках — эксклюзивный выбор.
- Кнопка: `Зафиксировать день`.
- Редактирование разрешено всегда.

### `/week`
- Выбор недели по дате.
- Показываются агрегаты недели, рассчитанные на сервере.
- Есть статус недели и список флагов отклонений.
- Поля ввода:
  - качество траектории `1..5`,
  - заметка недели.
- Кнопка: `Сохранить неделю`.

### `/month`
- Заголовок: `Месяц · {Mon YYYY}`.
- Справа статус дохода: `впереди / по плану / отставание`.
- Компоновка: строго 2 блока:
  1. `Общий итог`
  2. `По неделям`
- В `Общий итог`:
  - target income (read-only),
  - actual income (input),
  - чек подтверждения `Ввёл`,
  - delta,
  - агрегаты фокуса и тела,
  - trajectory quality `1..5`,
  - поле корректировки следующего месяца.
- В `По неделям`: deep minutes, key moves, trainings по неделям месяца.
- Действия:
  - `Сохранить месяц`,
  - `Зафиксировать месяц`.
- После фиксации:
  - показывается `Зафиксировано · {время}`,
  - поля месяца становятся read-only.

### `/vector`
- Редактирование долгосрочных констант:
  - старт,
  - горизонт,
  - цель дохода,
  - диапазон веса,
  - цель проекта,
  - лимит часов в неделю.

## 5. Техническая спецификация

- Next.js App Router + TypeScript.
- Мутации через Server Actions.
- Минимальный клиентский JavaScript.
- Хранение в PostgreSQL (`DATABASE_URL`).
- Инициализация схемы при старте через `lib/db.ts`.

Схема БД (`db/schema.sql`):
- `vector`
- `projects`
- `days`
- `day_training`
- `weeks`
- `month_reviews`
- `month_week_income`

## 6. Вычисления

Все расчёты выполняются на сервере:
- недельные и месячные агрегаты,
- noise %,
- speed,
- статус дохода.

## 7. UI-ограничения

- Без графиков.
- Без анимаций.
- Без геймификации.
- Без цветных декоративных секций.
- Типографика важнее рамок и декора.
- Спокойная, нейтральная, мобильная форма.
